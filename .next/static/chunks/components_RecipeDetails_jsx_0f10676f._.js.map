{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/ProgrammingHero/Milestone_10/Module_57/recipe-book/components/RecipeDetails.jsx"],"sourcesContent":["\"use client\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function RecipeDetails({ id }) {\r\n  const [recipe, setRecipe] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [likeCount, setLikeCount] = useState(0);\r\n  const { data: session } = useSession();\r\n  // console.log(session?.user);\r\n  useEffect(() => {\r\n    const fetchRecipe = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/recipes/${id}`\r\n        );\r\n        const data = await response.json();\r\n        setRecipe(data);\r\n        setLikeCount(data.likes || 0);\r\n      } catch (error) {\r\n        console.error(\"Error fetching recipe:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchRecipe();\r\n  }, [id]);\r\n\r\n  const handleLike = async () => {\r\n    if (session?.user?.email === recipe.userEmail) {\r\n      toast.error(\"You can't like your own recipe!\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/recipes/${id}`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n      if (response.ok) {\r\n        const updatedRecipe = await response.json();\r\n        setLikeCount(updatedRecipe.likes);\r\n        toast.success(\"You liked the recipe!\");\r\n      } else {\r\n        toast.error(\"Failed to like the recipe.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error liking recipe:\", error);\r\n      toast.error(\"Something went wrong.\");\r\n    }\r\n  };\r\n\r\n  if (!recipe) return <div className=\"mt-10 text-center\">Recipe not found</div>;\r\n\r\n  return (\r\n    <div className=\"mx-auto pt25 lg:pt-30 py-10\">\r\n      <p className=\"mb-4 text-xl font-semibold text-orange-500\">\r\n        {likeCount} people interested in this recipe\r\n      </p>\r\n\r\n      <img\r\n        src={recipe.image}\r\n        alt={recipe.title}\r\n        className=\"mb-6 h-64 w-full rounded-lg object-cover\"\r\n      />\r\n      <h1 className=\"mb-2 text-3xl font-bold dark:text-gray-200\">\r\n        {recipe.title}\r\n      </h1>\r\n      <p className=\"mb-1 text-gray-600 dark:text-gray-200\">\r\n        <strong>Cuisine:</strong> {recipe.cuisine}\r\n      </p>\r\n      <p className=\"mb-1 text-gray-600 dark:text-gray-200\">\r\n        <strong>Prep Time:</strong> {recipe.prepTime} minutes\r\n      </p>\r\n      <p className=\"mb-1 text-gray-600 dark:text-gray-200\">\r\n        <strong>Likes:</strong> {likeCount}\r\n      </p>\r\n      <p className=\"mb-1 text-gray-600 dark:text-gray-200\">\r\n        <strong>Categories:</strong> {recipe.categories?.join(\", \")}\r\n      </p>\r\n      <p className=\"mb-4 text-gray-600 dark:text-gray-200\">\r\n        <strong>Added by:</strong> {recipe.user?.name || \"Anonymous\"}\r\n      </p>\r\n\r\n      <div className=\"mb-6 dark:text-gray-200\">\r\n        <h2 className=\"mb-2 text-xl font-semibold\">Ingredients:</h2>\r\n        <p className=\"whitespace-pre-line\">{recipe.ingredients}</p>\r\n      </div>\r\n\r\n      <div className=\"mb-6 dark:text-gray-200\">\r\n        <h2 className=\"mb-2 text-xl font-semibold\">Instructions:</h2>\r\n        <p className=\"whitespace-pre-line\">{recipe.instructions}</p>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleLike}\r\n        className=\"mt-4 rounded bg-orange-500 px-6 py-2 text-white hover:bg-orange-600 disabled:cursor-not-allowed\"\r\n        disabled={session?.user?.email === recipe.userEmail}\r\n      >\r\n        Like\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}